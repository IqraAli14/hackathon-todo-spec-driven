---
id: 002
title: Phase II Full-Stack Constitution Update
stage: constitution
date: 2026-02-05
surface: agent
model: claude-opus-4-5-20251101
feature: 002-phase-ii
branch: 002-phase-ii
user: developer
command: /sp.constitution
labels: ["constitution", "phase-ii", "fullstack", "architecture"]
links:
  spec: null
  ticket: null
  adr: null
  pr: null
files:
  - .specify/memory/constitution.md
  - CLAUDE.md
tests:
  - null
---

## Prompt

Phase II Constitution ‚Äì Full-Stack Todo Web Application

## Purpose
Phase II evolves the Todo application from a console-based program
into a full-stack, multi-user web application with persistent storage.

## Mandatory Rules
- Spec-Driven Development only
- No manual coding by the developer
- All implementation must be generated by AI (Claude Code / Gemini)
- Every feature must be defined in a spec before implementation

## Technology Constraints (Hackathon II)
- Frontend: Next.js (App Router)
- Backend: Python FastAPI
- ORM: SQLModel
- Database: Neon Serverless PostgreSQL
- Authentication: Better Auth (JWT-based)
- Deployment: Vercel (frontend), backend separately

## Architecture Principles
- Frontend and backend are separate services
- Backend is stateless
- REST APIs only
- JWT authentication required for all API access
- Each user can access only their own tasks

## Out of Scope (Phase II)
- AI Chatbots
- OpenAI Agents SDK
- MCP tools
- Kubernetes
- Kafka
- Dapr

## Quality Standards
- Clean project structure
- Clear API boundaries
- Meaningful error handling
- No unnecessary features beyond requirements

## Response snapshot

Updated constitution from v1.0.0 to v2.0.0 (MAJOR version bump) with the following changes:

**Modified Principles:**
- VIII. Phase I Scope Enforcement ‚Üí VIII. Phase II Scope Enforcement (complete rewrite)

**Added Principles:**
- X. Service Separation (frontend/backend independence)
- XI. JWT Authentication Required (Better Auth)
- XII. Multi-User Data Isolation (user_id scoping)

**Added Sections:**
- Frontend Requirements (Next.js App Router, TypeScript strict)
- Backend Requirements (FastAPI, async, SQLModel)
- Database Constraints (PostgreSQL via Neon, UUID-based schemas)
- Authentication Requirements (JWT access/refresh tokens)
- API Design Requirements (full endpoint table)
- Deployment Requirements (Vercel + separate backend)

**Templates verified compatible.** All templates support web app structures.

## Outcome

- ‚úÖ Impact: Constitution v2.0.0 established for Phase II full-stack architecture
- üß™ Tests: No tests - constitution document only
- üìÅ Files: .specify/memory/constitution.md, CLAUDE.md
- üîÅ Next prompts: /sp.specify for first Phase II feature, consider /sp.adr for stack decision
- üß† Reflection: Major architectural shift from console to web requires clear boundaries

## Evaluation notes (flywheel)

- Failure modes observed: None
- Graders run and results (PASS/FAIL): N/A - constitution update
- Prompt variant (if applicable): Standard constitution input format
- Next experiment (smallest change to try): N/A
